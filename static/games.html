<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
            body {
  font-family: Arial, sans-serif;
  background-color: #111;
  color: white;
  margin: 0;
  padding: 20px;
}

.header-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  margin-bottom: 30px;
}

.left {
  position: relative; /* Important for suggestion list positioning */
}

#search-box {
  padding: 10px;
  width: 250px;
  font-size: 16px;
  border-radius: 6px;
  border: none;
  outline: none;
  background-color: #1c1c1c;
  color: #fff;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.1);
}

#suggestions {
  list-style: none;
  padding: 0;
  margin: 0;
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background-color: #111;
  color: #ffffff;
  z-index: 1000;
  border-radius: 0 0 6px 6px;
  max-height: 150px;
  overflow-y: auto;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
}

#suggestions li {
  padding: 10px;
  cursor: pointer;
}

#suggestions li:hover {
  background-color: #1b1a1a;
}

h1 {
  margin: 0 auto;
  font-size: 2rem;
}

.grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 20px;
}

.game-card {
  background-color: #222;
  padding: 10px;
  text-align: center;
  border-radius: 10px;
  transition: transform 0.3s;
}

.game-card:hover {
  transform: scale(1.05);
}

.game-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 6px;
}

.game-name {
  margin-top: 10px;
}

a {
  color: white;
  text-decoration: none;
}

    </style>
</head>
<body>
    <body>
  <div class="header-bar">
    <div class="left">
      <input type="text" id="search-box" placeholder="Search for a game..." autocomplete="off">
      <ul id="suggestions"></ul>
    </div>
    <h1>Game Library</h1>
  </div>

  {% if games %}
  <div class="grid">
    {% for game in games %}
    <div class="game-card">
      <a href="/game/{{game.name}}">
        <img src="{{game.image}}" alt="{{game.name}}">
        <div class="game-name">{{game.name}}</div>
      </a>
    </div>
    {% endfor %}
  </div>
  {% else %}
    <p>No matching game found.</p>
  {% endif %}

    <script>
  const searchBox = document.getElementById('search-box');
  const suggestions = document.getElementById('suggestions');

  searchBox.addEventListener('input', async function () {
    const query = this.value;
    if (query.length < 2) {
      suggestions.innerHTML = '';
      return;
    }

    const res = await fetch(`/suggest?q=${encodeURIComponent(query)}`);
    const data = await res.json();

    suggestions.innerHTML = '';
    data.forEach(name => {
      const li = document.createElement('li');
      li.textContent = name;
      li.style.cursor = 'pointer';
      li.style.padding = '5px';
      li.style.background = '#333';
      li.style.marginBottom = '2px';
      li.onclick = () => {
        const encodedName = encodeURIComponent(name); // Encode the URL safely
        window.location.href = `/game/${encodedName}`; // Navigate directly
      };
      suggestions.appendChild(li);
    });
  });
</script>

</body>
</html>